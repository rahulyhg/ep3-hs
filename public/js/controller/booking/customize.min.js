(function(){var i=0.65;var d=500;var h;var e;$(document).ready(function(){h=$(".bf-bundle");h.hide();if(!h.filter(":checked").length){h.first().prop("checked",true)}h.filter(":checked").closest(".bundle").find(".bundle-enabled").show();var j=h.filter(":not(:checked)").closest(".bundle");j.find(".bundle-enable").show();j.find(".bundle-customization").hide();j.css("opacity",i);h.on("change",function(){var m=$(this);var l=m.closest(".bundle");l.find(".bundle-enable").hide();l.find(".bundle-enabled").show();l.find(".bundle-customization").slideDown(d);l.css("opacity",1);var k=h.not(m).closest(".bundle");k.find(".bundle-enable").show();k.find(".bundle-enabled").hide();k.find(".bundle-customization").slideUp(d);k.css("opacity",i);a()});c(true);$(".bf-bi").on("change",function(){c(true)});$(".bf-bundle").on("change",function(){c(false)});f($(".bf-bn-price-col, .bf-bi-price-col"));$("#customization-submit-input").hide();$("#customization-submit-link").on("click","a",function(k){k.preventDefault();$(this).closest("form").submit()});$("#customization-coupon-submit-link").on("click","a",function(k){k.preventDefault();$(this).closest("form").submit()});a()});function c(j){$("body").clearQueue().queue(function(){var k=h.filter(":checked").closest(".bundle").find(".bundle-customization");var m=k.find(".bf-bi");if(k.length&&m.length){var n=k.find(".bf-pricing");var l=k.find(".bf-pricing-loading");if(n.length){if(j){n.fadeOut(d/2,function(){n.remove();b(k,function(){g(k)})})}}else{if(l.length){g(k)}else{b(k,function(){g(k)})}}}$(this).dequeue()})}function b(k,l){var j=$('<div class="bf-pricing-loading loading"></div>');k.append(j);j.css({"margin-top":16,height:49}).hide().fadeIn(d,l)}function g(j){if(e){e.abort()}var k={ajax:"true"};$.each($("#bf").serializeArray(),function(m,l){k[l.name]=l.value});e=$.ajax({data:k,error:function(){var l=j.find(".bf-pricing-loading");l.fadeOut(d/2);e=undefined},success:function(n){var m=$(n);var l=j.find(".bf-pricing-loading");if(l.length){l.fadeOut(d/2,function(){l.remove();j.append(m);m.hide().fadeIn(d)})}else{j.append(m);m.hide().fadeIn(d)}m.find(".bf-pricing-price-col").css("width",j.find(".bf-bi-price-col:first").width());e=undefined},url:$("#customization-pricing").data("url")})}function a(){var j=h.filter(":checked").val();if(j==="coupon"){$("#customization-submit-link").hide();$("#customization-coupon-submit-link").show()}else{$("#customization-submit-link").show();$("#customization-coupon-submit-link").hide()}}function f(k){var j=0;k.each(function(){var l=$(this).width();if(l>j){j=l}});k.width(j)}})();